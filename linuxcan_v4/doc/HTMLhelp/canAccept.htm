<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<HTML>
<HEAD>
    <META HTTP-EQUIV="Content-Type" Content="text/html; charset=iso-8859-1">
    <title>canAccept</title>
    <link rel="stylesheet" type="text/css" href="canlib.css">
</HEAD>

<BODY>
<img SRC="tux.png" ALT="linux" NOSAVE height=39 width=92 align=RIGHT>
<h3>canAccept</h3><p>

<h5 class=topich>Syntax</h5><p>
<table width="100%"><TR><TD><pre><code>
#include &lt;canlib.h&gt;
canStatus <b>canAccept</b>(int handle, long envelope, int flag);
</code></pre></TD></TR></TABLE>

<div class=topich>
<h5 class=topich>Description</h5><p>
This routine sets the hardware acceptance filters in the CAN controller.

<div class=topich>
<h5 class=topich>Parameters</h5><p>
<dl>
<dt><i>
handle
</i></dt>
<dd>An open handle to a CAN circuit.<dd>
</dl>
<dl><dt><i>envelope</i></dt>
<dd>The mask or code to set.</dd></dt></dl>

<dl><dt><i>flag</i></dt>
<dd>Any one of the following values:
<table>
<tr>
<th>Value</th><th>Meaning</th>
</tr>
<TR>
<TD>canFILTER_SET_CODE_STD</TD><TD>Sets the code for standard (11-bit) identifiers.</TD>
</TR>
<TR>
<TD>canFILTER_SET_MASK_STD</TD><TD>Sets the mask for standard (11-bit) identifiers.</TD>
</TR>
<TR>
<TD>canFILTER_SET_CODE_EXT</TD><TD>Sets the code for extended (29-bit) identifiers.</TD>
</TR>
<TR>
<TD>canFILTER_SET_MASK_EXT</TD><TD>Sets the mask for extended (29-bit) identifiers.</TD>
</TR>
</TABLE>
</dd></dt></dl>

<div class=topich>
<h5 class=topich>Return Value</h5><p>
<A HREF="errcodes.htm">canOK</A> (zero) if success<BR>
<A HREF="errcodes.htm">canERR_xxx</A> (negative) if failure.<BR>

<div class=topich>
<h5 class=topich>Code and Mask format</h5><p>
A binary 1 in a mask means "the corresponding bit in the code is relevant"<P>
A binary 0 in a mask means "the corresponding bit in the code is not relevant"<P>

A relevant binary 1 in a code means "the corresponding bit in the identifier must be 1"<P>

A relevant binary 0 in a code means "the corresponding bit in the identifier must be 0"<P>

In other words, the message is accepted if ((code XOR id) AND mask) == 0.

 

<div class=note>
<h5 class=note><B>Notes</B></h5>
<ul>
<li>You can set the extended code and mask only on CAN controllers that support extended identifiers.</li>
<li>Not all CAN controllers support different masks for standard and extended CAN identifiers.</li>
<li>If you want to remove a filter, call canAccept with the mask set to 0.</li>
</ul>
</div>

<div class=relh>
<h5 class=relh><B>Related Topics</B></h5><p>
<A HREF="code_examples.htm#canAccept">An example.</a>
</div>

</BODY>
</HTML>
